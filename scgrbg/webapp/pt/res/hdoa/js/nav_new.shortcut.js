 var ShortcutPanel=function(_,$,A){this.holder=_;this.icons=$;this.iconcount=A;this.treeNodeDrag=false;this.init()};ShortcutPanel.prototype.init=function(){var _=[];_[_.length]="<ul id=\"shortcutcontainer\" class=\"licommon\">";for(var A=0;A<this.iconcount;A++){var $=this.getIconByPosition(A);_[_.length]="<li shortcutflag="+A+" id=\"shortcut"+A+"\" title=\"";_[_.length]=$==null?"\u62d6\u62fd\u5bfc\u822a\u83dc\u5355\u81f3\u6b64\uff0c\u6dfb\u52a0\u5feb\u6377\u65b9\u5f0f\u3002"+"\"":$.ctitle+"\"";_[_.length]=$==null?" >":" onclick=\"clickCut("+A+")\" >";_[_.length]="<div shortcutflag="+A+" id=\"shortcutimg"+A+"\" class=";_[_.length]=$==null?(IS_IE6?"\"shortcutBlankie6\" ":"\"shortcutBlank\" "):(IS_IE6?"\"shortcutie6\" ":"\"shortcut\" ");_[_.length]="style=\"width:50px;height:50px\" ";_[_.length]=" onmouseover=\"overCut(event,"+A+")\""+" onmouseout=\"outCut(event,"+A+")\"";_[_.length]="></div><div shortcutflag="+A+" class=\"shortcut_name\">";_[_.length]=$==null?"\u5feb\u6377\u83dc\u5355":getShortName($.ctitle);_[_.length]="</div></li>"}_[_.length]="</ul>";PT.html(this.holder,_.join(""))};ShortcutPanel.prototype.getIconByPosition=function($){if(this.icons==null||this.icons.length<1)return null;for(var _=0;_<this.icons.length;_++)if(this.icons[_].position==$)return this.icons[_];return null};ShortcutPanel.prototype.refresh=function(){PT.html(this.holder,"");var $=PT.s("getShortcut");this.icons=$;this.init()};function overCut(E,G){var B=spanel.getIconByPosition(G),D=E.srcElement;if(!D)D=E.target;var F=getXY(D);if(B){var A=B.cguid,_=B.position;if(!spanel.treeNodeDrag){var C=$("delbtn").style;C.visibility="visible";C.left=F.left+43;C.top=F.top}window.selectedCuscGUID=A;if(D.className.indexOf("Mouseover")<0)D.className=D.className+"Mouseover";window.position=_}else{window.selectedCuscGUID=null;if(D.className.indexOf("Mouseover")<0)D.className=D.className+"Mouseover"}window.position=G}function outCut(F){var I=F.srcElement||F.target,J={x:F.clientX-10,y:F.clientY-10},D=I,G=getXY(I),C=I.style,B=C.width,E=C.height;B=B.split("px")[0];E=E.split("px")[0];var H={ltX:G.left,ltY:G.top,rbX:parseInt(G.left)+parseInt(B)-10,rbY:parseInt(G.top)+parseInt(E)-10};if(!isInBox(J,H)){var A=$("delbtn").style;A.visibility="hidden";D.className=D.className.split("Mouseover")[0]}var _=spanel.getIconByPosition(position);if(_);}function clickCut(i){var curIcon=spanel.getIconByPosition(i);if(!!curIcon.curl&&curIcon.curl!="pt/canvas?formid=")PT.showTabUrl(curIcon.curl,curIcon.ctitle);else if(!!curIcon.cscript)eval(curIcon.cscript)}function clickDelCut(){var A=window.selectedCuscGUID;if(A==null||A=="")alert("\u8bf7\u9009\u62e9\u8981\u5220\u9664\u7684\u83dc\u5355\u9879\u76ee!");var B=PT.ns("delMenu",null,"cGUID="+A);if(B){deleteByPosition(position);var _=$("delbtn").style;_.visibility="hidden";window.spanel.icons=PT.s("getShortcut")}}function dragAddCut(_,A){PT.asySubmit("aos_mainui_nav_new","addMenu",null,"cMenuID="+A.code+"&position="+_,function(C){if(C){addByPosition(_,A);var B=$("delbtn").style;B.visibility="hidden";window.spanel.icons=PT.s("getShortcut")}})}function deleteByPosition(B){var A=$("shortcut"+B),_=[];_[_.length]="<li shortcutflag="+B+" id=\"shortcut"+B+"\" title=\"";_[_.length]="\u62d6\u62fd\u5bfc\u822a\u83dc\u5355\u81f3\u6b64\uff0c\u6dfb\u52a0\u5feb\u6377\u65b9\u5f0f\u3002"+"\"";_[_.length]=" >";_[_.length]="<div shortcutflag="+B+" id=\"shortcutimg"+B+"\" class=";_[_.length]=IS_IE6?"\"shortcutBlankie6\" ":"\"shortcutBlank\" ";_[_.length]="style=\"width:50px;height:50px\" ";_[_.length]=" onmouseover=\"overCut(event,"+B+")\""+" onmouseout=\"outCut(event,"+B+")\"";_[_.length]="></div><div shortcutflag="+B+" class=\"shortcut_name\">";_[_.length]="\u5feb\u6377\u83dc\u5355";_[_.length]="</div></li>";A.outerHTML=_.join("")}function addByPosition(C,_){var B=$("shortcut"+C),A=[];A[A.length]="<li shortcutflag="+C+" id=\"shortcut"+C+"\" title=\"";A[A.length]=_.name+"\"";A[A.length]=" onclick=\"clickCut("+C+")\" >";A[A.length]="<div shortcutflag="+C+" id=\"shortcutimg"+C+"\" class=";A[A.length]=(IS_IE6?"\"shortcutie6\" ":"\"shortcut\" ");A[A.length]="style=\"width:50px;height:50px\" ";A[A.length]=" onmouseover=\"overCut(event,"+C+")\""+" onmouseout=\"outCut(event,"+C+")\"";A[A.length]="></div><div shortcutflag="+C+" class=\"shortcut_name\">";A[A.length]=getShortName(_.name);A[A.length]="</div></li>";B.outerHTML=A.join("")}function getXY($){for(var _=0,A=0;$!=document.body;_+=$.offsetTop,A+=$.offsetLeft,$=$.offsetParent);return{left:A,top:_}}function isInBox(_,$){return _.x>$.ltX&&_.x<$.rbX&&_.y>$.ltY&&_.y<$.rbY}function getShortName($){var B=0,A=$.split(""),_="";for(var C=0;C<A.length;C++){if(A[C].charCodeAt(0)<299)B++;else B+=2;if(B<=12)_+=A[C];else{_+="...";return _}}return _}