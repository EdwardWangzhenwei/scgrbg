 mxShape.prototype.updateSvgScale=function(_){_.setAttribute("stroke-width",Math.round(Math.max(0,this.strokewidth*this.scale)));if(this.isDashed){var $=Math.max(1,Math.round(3*this.scale*this.strokewidth));_.setAttribute("stroke-dasharray",$+" "+$)}this.crisp&&(this.roundedCrispSvg||this.isRounded!=true)&&(this.rotation==null||this.rotation==0)?_.setAttribute("shape-rendering","crispEdges"):_.removeAttribute("shape-rendering")};window.setDefaultGraphStyle=function(){var $=graph.graph.getStylesheet(),_=$.getDefaultEdgeStyle();_[mxConstants.STYLE_EDGE]=mxEdgeStyle.ElbowConnector;_[mxConstants.STYLE_STROKECOLOR]="#dadada";_[mxConstants.STYLE_ROUNDED]=true;_[mxConstants.STYLE_ENDARROW]="block";_[mxConstants.STYLE_STROKEWIDTH]=4;_[mxConstants.STYLE_PERIMETER_SPACING]=4;graph.setEdgeStyle(_);var A=$.getDefaultVertexStyle();A[mxConstants.STYLE_SHAPE]=mxConstants.SHAPE_LABEL;A[mxConstants.STYLE_STROKECOLOR]="white";A[mxConstants.STYLE_STROKEWIDTH]="";A[mxConstants.STYLE_FILLCOLOR]="white";A[mxConstants.STYLE_ROUNDED]=true;A[mxConstants.STYLE_ALIGN]=mxConstants.ALIGN_CENTER;A[mxConstants.STYLE_VERTICAL_ALIGN]=mxConstants.ALIGN_TOP;A[mxConstants.STYLE_IMAGE_ALIGN]=mxConstants.ALIGN_CENTER;A[mxConstants.STYLE_IMAGE_VERTICAL_ALIGN]=mxConstants.ALIGN_TOP;A[mxConstants.STYLE_GRADIENT_DIRECTION]=mxConstants.DIRECTION_EAST;A[mxConstants.STYLE_SHADOW]=false;A[mxConstants.STYLE_FONTFAMILY]="\u5b8b\u4f53,\u5fae\u8f6f\u96c5\u9ed1,Microsoft YaHei,Arial";A[mxConstants.STYLE_FONTSIZE]="12";A[mxConstants.STYLE_FONTCOLOR]="black";A[mxConstants.STYLE_IMAGE_WIDTH]="50";A[mxConstants.STYLE_IMAGE_HEIGHT]="50";A[mxConstants.STYLE_SPACING_TOP]="60";A[mxConstants.STYLE_SPACING]="0";A[mxConstants.STYLE_IMAGE]="res/mainui/images/nav_new/graph_default_icon.png";graph.graph.getStylesheet().putDefaultVertexStyle(A);graph.refresh()};window.setWelcomeGraph=function(){var D=mxUtils.load("res/mainui/js/default.xml"),_=D.getDocumentElement(),A=_.xml;if(A==null)A=(new XMLSerializer()).serializeToString(_);graph.set(A);var C=graph.graph.getStylesheet().getDefaultVertexStyle(),$=mxUtils.clone(C);$[mxConstants.STYLE_IMAGE_WIDTH]="535";$[mxConstants.STYLE_IMAGE_HEIGHT]="350";$[mxConstants.STYLE_SPACING_TOP]="300";$[mxConstants.STYLE_SPACING]="8";$[mxConstants.STYLE_IMAGE]="res/mainui/images/welocme-logo.jpg";if(top.mainUI.welcomePath)$[mxConstants.STYLE_IMAGE]=top.mainUI.welcomePath;var B=top.mainUI.basicInfo["defaultTheme"];graph.setCellStyle("welcomeVertexStyle",$);graph.refresh()};window.setConfigStyle=function(){var $=graph.getDesp(),_=graph.graph.getStylesheet().getDefaultVertexStyle();for(var C=0;C<$.length;C++){var A=$[C];_=mxUtils.clone(_);var B=A.image;if(B){_[mxConstants.STYLE_IMAGE]=B;graph.setCellStyle(A.style,_)}}graph.refresh()};window.homePage=function(){if(top&&top.mainUI&&top.mainUI.homePagePath){PT.hideLayout("graphholder");PT.showLayout("frameholder");document.getElementById("framegraph").src=window.webroot+top.mainUI.homePagePath}else PT.alert("\u6ca1\u6709\u914d\u7f6e\u4e3b\u9875\u3002")};function createLink($){mxGraphHandler.prototype.guidesEnabled=true;var _=20;if(!$.isEnabled())$.addMouseListener({currentState:null,currentIconSet:null,mouseDown:function($,_){if(this.currentState!=null){this.dragLeave(_.getEvent(),this.currentState);this.currentState=null}},mouseMove:function(A,C){if($.isEnabled())return;if(this.currentState!=null&&(C.getState()==this.currentState||C.getState()==null)){var D=_,B=new mxRectangle(C.getGraphX()-D,C.getGraphY()-D,2*D,2*D);if(mxUtils.intersects(B,this.currentState))return}B=$.view.getState(C.getCell());if($.isMouseDown||(B!=null&&!$.getModel().isVertex(B.cell)))B=null;if(B!=this.currentState){if(this.currentState!=null)this.dragLeave(C.getEvent(),this.currentState);this.currentState=B;if(this.currentState!=null)this.dragEnter(C.getEvent(),this.currentState)}},mouseUp:function(_,B){var A=$.view.getState(B.getCell());if(A!=null&&$.getModel().isVertex(A.cell));},dragEnter:function($,_){if(this.currentIconSet==null)this.currentIconSet=new mxIconSet($,_)},dragLeave:function($,_){if(this.currentIconSet!=null){this.currentIconSet.destroy();this.currentIconSet=null}}});return $}function mxIconSet(evt,state){var cellId=state.cell.id,graph=state.view.graph,cellInfo=getCellInfo(cellId,graph.data),cellState=cellInfo.state;if(cellState==null||cellState=="0"||cellState=="N")return;var curl=cellInfo.url,script=cellInfo.script,fullUrl=webroot+curl;this.images=[];var md=(mxClient.IS_TOUCH)?"touchstart":"mousedown",img=document.createElement("DIV");img.style.position="absolute";img.style.cursor="pointer";img.style.width="75px";img.style.height="90px";img.style.left=(state.x-1)+"px";img.style.top=(state.y+5)+"px";img.style.backgroundColor="transparent";mxEvent.addListener(img,md,mxUtils.bind(this,function(evt){if(curl&&curl!="pt/canvas?formid="){if(PT)PT.showTabUrl(curl,cellInfo.detail[0].name);else window.showModelessDialog(fullUrl,null,"dialogWidth=600px;dialogHeight=400px")}else if(script)eval(script);mxEvent.consume(evt);this.destroy()}));state.view.graph.container.appendChild(img);this.images.push(img)}mxIconSet.prototype.destroy=function(){if(this.images!=null)for(var _=0;_<this.images.length;_++){var $=this.images[_];$.parentNode.removeChild($)}this.images=null};function getCellInfo($,_){var C={};for(var B=0;B<_.length;B++){var A=_[B];if(A.id==$)C=A}return C}